<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Day 25: Sea Cucumber</title>
<link rel="stylesheet" href="./../aoc.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
<!-- <script defer src="https://use.fontawesome.com/releases/v5.0.4/js/all.js"></script> -->
<!-- <link rel="preconnect" href="https://fonts.googleapis.com" /><link
	rel="preconnect"
	href="https://fonts.gstatic.com"
	crossorigin
/><link
	href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&family=Source+Serif+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap"
	rel="stylesheet"
/> -->
<link
	rel="stylesheet"
	type="text/css"
	href="https://rben01.github.io/Iosevka/dist/iosevka-rltb-mono/iosevka-rltb-mono.css"
/>
<link
	rel="stylesheet"
	type="text/css"
	href="https://rben01.github.io/Iosevka/dist/iosevka-rltb-proportional-sans/iosevka-rltb-proportional-sans.css"
/>

<link
	rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css"
	integrity="sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw"
	crossorigin="anonymous"
/>

<!-- The loading of KaTeX is deferred to speed up page rendering -->
<script
	defer
	src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js"
	integrity="sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH"
	crossorigin="anonymous"
></script>

<!-- To automatically render math in text elements, include the auto-render extension: -->
<script
	defer
	src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js"
	integrity="sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v"
	crossorigin="anonymous"
	onload="renderMathInElement(document.body);"
></script>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p><a href="../advent_of_code_2021.html#_problems_and_solutions" class="header-nav-link first"><span class="icon"><i class="fa fa-list-ol"></i></span> Back to Home</a>
<a href="././day_24.html" class="header-nav-link"><span class="icon"><i class="fa fa-chevron-left"></i></span> Previous (Day 24)</a></p>
</div>
<div class="sect1">
<h2 id="_day_25_sea_cucumber">Day 25: Sea Cucumber</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://adventofcode.com/2021/day/25" target="^"><span class="icon"><i class="fa fa-star-half-o"></i></span> Day 25 problem description</a> â”‚ <a href="../../src/day_25/input.txt" target="^"><span class="icon"><i class="fa fa-file-text-o"></i></span> Problem input</a></p>
</div>
<div class="paragraph">
<p>Simple array manipulation.
Not interesting!</p>
</div>
<hr>
<div class="sect2">
<h3 id="_setup_and_part_1_there_was_no_part_2">Setup and Part 1 (there was no Part 2)</h3>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">use crate::Answer;
use std::{collections::BTreeSet as Set, fmt::Write};

#[derive(Clone, Copy, Debug, PartialEq, Eq, PartialOrd, Ord)]
struct Point {
	row: usize,
	col: usize,
}

#[derive(Debug, Clone)]
struct SeaGarden {
	width: usize,
	height: usize,
	rights: Set&lt;Point&gt;,
	downs: Set&lt;Point&gt;,
}

impl SeaGarden {
	fn from_str(input: &amp;str) -&gt; Self {
		let mut rights = Set::new();
		let mut downs = Set::new();

		let mut width = 0;
		let mut height = 0;

		for (row, line) in input.lines().enumerate() {
			height += 1;
			width = line.chars().count();
			for (col, c) in line.chars().enumerate() {
				let loc = Point { row, col };
				match c {
					'&gt;' =&gt; rights.insert(loc),
					'v' =&gt; downs.insert(loc),
					'.' =&gt; continue,
					_ =&gt; unreachable!(),
				};
			}
		}
		Self {
			width,
			height,
			rights,
			downs,
		}
	}

	fn tick(&amp;mut self) -&gt; bool {
		let mut any_cucumbers_did_move = false;

		let mut new_rights = Set::new();

		for old_loc @ &amp;Point { row, col } in &amp;self.rights {
			let new_loc = Point {
				row,
				col: (col + 1) % self.width,
			};
			if self.rights.contains(&amp;new_loc) || self.downs.contains(&amp;new_loc) {
				new_rights.insert(*old_loc);
			} else {
				new_rights.insert(new_loc);
				any_cucumbers_did_move = true;
			}
		}

		let new_rights = new_rights;
		let mut new_downs = Set::new();

		for old_loc @ &amp;Point { row, col } in &amp;self.downs {
			let new_loc = Point {
				row: (row + 1) % self.height,
				col,
			};
			if new_rights.contains(&amp;new_loc) || self.downs.contains(&amp;new_loc) {
				new_downs.insert(*old_loc);
			} else {
				new_downs.insert(new_loc);
				any_cucumbers_did_move = true;
			}
		}

		self.rights = new_rights;
		self.downs = new_downs;

		any_cucumbers_did_move
	}

	fn run_until_no_movement(&amp;mut self) -&gt; usize {
		let mut n = 1;
		while self.tick() {
			n += 1;
		}
		n
	}
}

fn ans_for_input(input: &amp;str) -&gt; Answer&lt;usize, usize&gt; {
	let mut garden = SeaGarden::from_str(input);
	(25, (pt1(&amp;mut garden), 0)).into()
}
pub fn ans() -&gt; Answer&lt;usize, usize&gt; {
	ans_for_input(include_str!("input.txt"))
}

fn pt1(garden: &amp;mut SeaGarden) -&gt; usize {
	garden.run_until_no_movement()
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/languages/rust.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/languages/swift.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>