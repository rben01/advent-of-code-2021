<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Dive!</title>
<link rel="stylesheet" href="./../aoc.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
<!-- <script defer src="https://use.fontawesome.com/releases/v5.0.4/js/all.js"></script> -->
<link rel="preconnect" href="https://fonts.googleapis.com" /><link
	rel="preconnect"
	href="https://fonts.gstatic.com"
	crossorigin
/><link
	href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
	rel="stylesheet"
/>

<link
	rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.css"
	integrity="sha384-t5CR+zwDAROtph0PXGte6ia8heboACF9R5l/DiY+WZ3P2lxNgvJkQk5n7GPvLMYw"
	crossorigin="anonymous"
/>

<!-- The loading of KaTeX is deferred to speed up page rendering -->
<script
	defer
	src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/katex.min.js"
	integrity="sha384-FaFLTlohFghEIZkw6VGwmf9ISTubWAVYW8tG8+w2LAIftJEULZABrF9PPFv+tVkH"
	crossorigin="anonymous"
></script>

<!-- To automatically render math in text elements, include the auto-render extension: -->
<script
	defer
	src="https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/contrib/auto-render.min.js"
	integrity="sha384-bHBqxz8fokvgoJ/sc17HODNxa42TlaEhB+w8ZJXTc2nZf1VgEaFZeZvT4Mznfz0v"
	crossorigin="anonymous"
	onload="renderMathInElement(document.body);"
></script>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p><a href="../advent_of_code_2021.html#_problems_and_solutions"><span class="icon"><i class="fa fa-list-ol"></i></span> Back to Home</a></p>
</div>
<div class="sect1">
<h2 id="_dive">Dive!</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://adventofcode.com/2021/day/2" target="^"><span class="icon"><i class="fa fa-star-half-o"></i></span> Day 2 problem description</a> â”‚ <a href="../../src/day_02/input.txt" target="^"><span class="icon"><i class="fa fa-file-text-o"></i></span> Problem input</a></p>
</div>
<div class="paragraph">
<p>There isn&#8217;t really anything too deep to go into here.
You just have to update the current state correctly.</p>
</div>
<hr>
<div class="openblock">
<div class="title">Setup</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">struct Position {
	h: i32,
	v: i32,
}

impl Position {
	fn get_ans(&amp;self) -&gt; i32 {
		self.h * self.v
	}
}

enum Direction {
	Forward,
	Up,
	Down,
}

impl Direction {
	fn from_str(s: &amp;str) -&gt; Option&lt;Self&gt; {
		use Direction::*;
		Some(match s {
			"forward" =&gt; Forward,
			"up" =&gt; Up,
			"down" =&gt; Down,
			_ =&gt; return None,
		})
	}
}

struct Step {
	direction: Direction,
	dist: i32,
}

fn read_input(s: &amp;str) -&gt; Option&lt;Vec&lt;Step&gt;&gt; {
	s.lines()
		.map(|line| {
			let mut tokens_iter = line.split_whitespace();
			let direction = Direction::from_str(tokens_iter.next()?)?;
			let dist = tokens_iter.next()?.parse().ok()?;

			Some(Step { direction, dist })
		})
		.collect()
}

fn ans_for_input(input: &amp;str) -&gt; Answer&lt;i32, i32&gt; {
	let directions = read_input(input).unwrap();
	(2, (pt1(directions.iter()), pt2(directions.iter()))).into()
}

pub fn ans() -&gt; Answer&lt;i32, i32&gt; {
	ans_for_input(include_str!("input.txt"))
}</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="title">Part 1</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn pt1&lt;T: std::ops::Deref&lt;Target = Step&gt;&gt;(steps: impl Iterator&lt;Item = T&gt;) -&gt; i32 {
	use Direction::*;
	let mut h = 0;
	let mut v = 0;
	for step in steps {
		let Step { direction, dist } = &amp;*step;
		match direction {
			Forward =&gt; h += dist,
			Up =&gt; v -= dist,
			Down =&gt; v += dist,
		};
	}

	Position { h, v }.get_ans()
}</code></pre>
</div>
</div>
</div>
</div>
<div class="openblock">
<div class="title">Part 2</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn pt2&lt;T: std::borrow::Borrow&lt;Step&gt;&gt;(steps: impl Iterator&lt;Item = T&gt;) -&gt; i32 {
	use Direction::*;
	let mut h = 0;
	let mut v = 0;
	let mut aim = 0;
	for step in steps {
		let Step { direction, dist } = step.borrow();
		let dist = *dist;
		match direction {
			Forward =&gt; {
				h += dist;
				v += aim * dist;
			}
			Up =&gt; aim -= dist,
			Down =&gt; aim += dist,
		};
	}

	Position { h, v }.get_ans()
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/languages/rust.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/languages/swift.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>